{{ $page := .page }}
{{ $site := .site }}
{{ $menu := .menu }}
{{ $item := .entry }}

<div class="collapse nav-collapse" id="collapse-{{ $item.Identifier }}">
  <ul class="nav-list nav-list--nested">
    {{ $lvl := $item.Identifier }}
    {{ range $item.Children }}
    {{ if .HasChildren }}
    <li class="nav-item nav-item--parent">
      <button class="nav-item-toggle" data-bs-toggle="collapse" data-bs-target="#collapse-{{ .Identifier }}" aria-expanded="false" data-name="{{ .Identifier }}" data-parent="{{ $lvl }}">
        <a href="{{ .URL }}" class="nav-item-link">{{ .Name }}</a>
        <span class="nav-item-chevron">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </span>
      </button>
      {{ $temp := dict "menu" $.Site.Menus.main "page" $.Page "site" $.Site "entry" . }}
      {{ partial "sidebar-nav.html" $temp }}
    </li>
    {{ else }}
    <li class="nav-item nav-item--leaf">
      <a href="{{ .URL }}" class="nav-item-link" data-name="{{ .Identifier }}" data-parent="{{ $lvl }}">
        {{ .Name }}
      </a>
    </li>
    {{ end }}
    {{ end }}
  </ul>
</div>
