{{- /* DrawIO embed shortcode */}}
{{- $diagramName := .Get "diagramName" | default "" -}}
{{- $diagramWidth := .Get "diagramWidth" | default "" -}}
{{- /* Convert diagram name to filename: lowercase, replace spaces with hyphens */ -}}
{{- $filename := $diagramName | lower | replaceRE " " "-" -}}
{{- $svgPath := printf "%sdiagrams/%s.svg" .Site.BaseURL $filename -}}
<div class="my-6">
  {{- if $diagramName }}
  <figure class="border-border bg-card overflow-hidden rounded-lg border p-4">
    <img
      src="{{ $svgPath }}"
      alt="{{ $diagramName }} diagram"
      class="mx-auto h-auto w-full max-w-full"
      {{- if $diagramWidth }} style="max-width: {{ $diagramWidth }}px;"{{- end }}
      loading="lazy"
    />
    <figcaption class="text-muted-foreground mt-3 text-center text-sm">{{ $diagramName }}</figcaption>
  </figure>
  {{- else }}
  <div class="border-info/30 bg-info/10 rounded-lg border p-4">
    <div class="text-info flex items-center gap-2 text-sm">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="10" />
        <path d="M12 16v-4" />
        <path d="M12 8h.01" />
      </svg>
      <span>DrawIO diagram placeholder - no diagram name specified</span>
    </div>
  </div>
  {{- end }}
</div>
