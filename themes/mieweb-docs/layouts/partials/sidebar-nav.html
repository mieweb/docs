{{- /* Recursive sidebar navigation */}} {{ $page := .page }} {{ $site := .site }} {{ $menu := .menu }} {{ $item :=
.entry }} {{ $level := .level | default 1 }}

<ul id="nav-{{ $item.Identifier }}" class="sidebar-nav-children mt-1 hidden space-y-0.5 pl-4" data-level="{{ $level }}">
  {{ $lvl := $item.Identifier }} {{ range $item.Children }} {{ if .HasChildren }}
  <li data-name="{{ .Identifier }}" data-parent="{{ $lvl }}">
    <div class="flex items-start gap-1">
      <button
        class="sidebar-toggle text-muted-foreground hover:bg-muted hover:text-foreground mt-0.5 flex h-6 w-6 shrink-0 items-center justify-center rounded transition-colors"
        aria-expanded="false"
        data-target="nav-{{ .Identifier }}"
        aria-label="Toggle {{ .Name }} submenu"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="12"
          height="12"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-chevron-right transition-transform duration-200"
        >
          <path d="m9 18 6-6-6-6" />
        </svg>
      </button>
      <a
        href="{{ .URL }}"
        class="flex-1 min-w-0 rounded px-1.5 py-0.5 text-sm leading-relaxed text-foreground transition-colors hover:bg-muted hover:text-primary {{ if eq $.Page.RelPermalink .URL }}bg-muted font-medium text-primary{{ end }}"
        {{
        if
        eq
        $.Page.RelPermalink
        .URL
        }}aria-current="page"
        {{
        end
        }}
        >{{ .Name }}</a
      >
    </div>
    {{ $temp := dict "menu" $.Site.Menus.main "page" $.Page "site" $.Site "entry" . "level" (add $level 1) }} {{ partial
    "sidebar-nav.html" $temp }}
  </li>
  {{ else }}
  <li>
    <a
      href="{{ .URL }}"
      class="block rounded px-1.5 py-0.5 pl-8 text-sm leading-relaxed text-foreground transition-colors hover:bg-muted hover:text-primary {{ if eq $.Page.RelPermalink .URL }}bg-muted font-medium text-primary{{ end }}"
      data-name="{{ .Identifier }}"
      data-parent="{{ $lvl }}"
      {{
      if
      eq
      $.Page.RelPermalink
      .URL
      }}aria-current="page"
      {{
      end
      }}
    >
      {{ .Name }}
    </a>
  </li>
  {{ end }} {{ end }}
</ul>
